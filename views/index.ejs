<!DOCTYPE html>
<html>
  <head>
    <title>DocTag Server</title>
    <link rel="stylesheet" href="/stylesheets/style.css" />
    <!-- Compiled and minified CSS -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/dropzone/5.5.1/min/dropzone.min.css"
    />
    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    <!-- <script src="../library/dropzone-5.7.0/dist/dropzone.js"></script> -->
  </head>
  <body>
      <nav>
          <div class="nav-wrapper">
            <a href="#!" style="margin-left: 24px" class="brand-logo">Doctag Server</a>
            <ul class="right hide-on-med-and-down">
              <li><a href="/">Home</a></li>
              <li><a href="/judul/view">Judul</a></li>
              <li><a href="/dosen/view">Nama Dosen</a></li>
              <li><a href="/nomor/view">Regex Nomor</a></li>
              <li><a href="/isi/view">Regex Isi</a></li>
            </ul>
          </div>
        </nav>
    <h4>Upload</h4>
    <p>Upload single file (*/image OR *.pdf)</p>
    <form action="/" method="post" enctype="multipart/form-data" multiple="multiple" name="file">
      <input type="file" name="file">
      <button type="submit" class="waves-effect waves-light btn">
        UPLOAD
      </button>
    </form>
    <!-- <form
      action="/"
      method="post"
      enctype="multipart/form-data"
      multiple="multiple"
      class="dropzone"
      style="width: 30%"
      id="myAwesomeDropzone"
      name="file"
    >
    </form>
    <button id="submit-all" type="submit" class="waves-effect waves-light btn">
      RUN ENGINE
    </button> -->
    <h4>Form Input Dokumen</h4>
    <div class="input-field col s6">
      <input placeholder="Tipe dokumen" type="text" class="validate" value="<%= data.doc_type %>">
      <label for="first_name">Tipe dokumen</label>
    </div>
    
    <% if(!isEmpty){%>
      <% if(data.nama_dosen){%>
        <% data.nama_dosen.forEach(function(item, index) { %>
          <div class="dosen-name input-field col s6">
            <input placeholder="Nama dosen" type="text" class="validate" value="<%= item.nama_dosen %>">
            <label for="first_name">Nama Dosen <%= index+1 %></label>
          </div>
          <div class="dosen-name input-field col s6">
            <input placeholder="Bobot" type="text" class="validate" value="<%= item.bobot %>">
            <label for="first_name">Bobot</label>
          </div>
          <div class="dosen-name input-field col s6">
            <input placeholder="NIP" type="text" class="validate" value="<%= item.nip %>">
            <label for="first_name">NIP</label>
          </div>
          <div class="dosen-name input-field col s6">
            <input placeholder="NIDN" type="text" class="validate" value="<%= item.nidn %>">
            <label for="first_name">NIDN</label>
          </div>
        <% }); %>
      <% } %>
      
      <% if(data.nomor != ""){%>
        <div class="input-field col s6">
          <input placeholder="Nomor surat" type="text" class="validate" value="<%= data.nomor %>">
          <label for="first_name">Nomor Surat</label>
        </div>
      <% } %>
      <% if(data.tanggal != ""){%>
      <div class="input-field col s6">
        <input placeholder="Tanggal" type="text" class="validate" value="<%= data.tanggal %>">
        <label for="first_name">Tanggal</label>
      </div>
      <% } %>
      <!-- Rekening Struk -->
      <% if(data.nominal != ""){%>
      <div class="input-field col s6">
        <input placeholder="Nominal" type="text" class="validate" value="<%= data.nominal %>">
        <label for="first_name">Nominal</label>
      </div>
      <% } %>
      <% if(data.rekening != ""){%>
      <div class="input-field col s6">
        <input placeholder="Rekening Tujuan" type="text" class="validate" value="<%= data.rekening %>">
        <label for="first_name">Rekening Tujuan</label>
      </div>
      <% } %>
      <% if(data.pemilik_rek != ""){%>
      <div class="input-field col s6">
        <input placeholder="Pemilik Rekening Tujuan" type="text" class="validate" value="<%= data.pemilik_rek %>">
        <label for="first_name">Pemilik Rekening Tujuan</label>
      </div>
      <% } %>
      <!-- Surat tugas mengajar -->
      <% if(data.pangkat != ""){%>
      <div class="input-field col s6">
        <input placeholder="Pangkat" type="text" class="validate" value="<%= data.pangkat %>">
        <label for="first_name">Pangkat</label>
      </div>
      <% } %>
      <% if(data.jabatan != ""){%>
      <div class="input-field col s6">
        <input placeholder="Jabatan" type="text" class="validate" value="<%= data.jabatan %>">
        <label for="first_name">Jabatan</label>
      </div>
      <% } %>
      <% if(data.jurusan != ""){%>
      <div class="input-field col s6">
        <input placeholder="Jurusan" type="text" class="validate" value="<%= data.jurusan %>">
        <label for="first_name">Jurusan</label>
      </div>
      <% } %>
      <% if(data.semester != ""){%>
      <div class="input-field col s6">
        <input placeholder="Semester" type="text" class="validate" value="<%= data.semester %>">
        <label for="first_name">Semester</label>
      </div>
      <% } %>
      <% if(data.tahun_akademik != ""){%>
      <div class="input-field col s6">
        <input placeholder="Tahun Akademik" type="text" class="validate" value="<%= data.tahun_akademik %>">
        <label for="first_name">Tahun Akademik</label>
      </div>
      <% } %>
    <% } %>
    <button class="waves-effect waves-light btn">Submit</button>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/dropzone/5.5.1/min/dropzone.min.js"></script>
    <script>
      {
        console.log("Hello world");

        Dropzone.options.myAwesomeDropzone = {
          paramName: "file", // The name that will be used to transfer the file
          autoProcessQueue: false,
          init: function() {
            var submitButton = document.querySelector("#submit-all");
            myAwesomeDropzone = this; // closure
            submitButton.addEventListener("click", function() {
              if (myAwesomeDropzone.getQueuedFiles().length === 0) {
                alert("Please drop or select file to upload !!!");
              } else {
                for (var i = 0; i < myAwesomeDropzone.getAcceptedFiles().length; i++) {
                    myAwesomeDropzone.processFile(myAwesomeDropzone.getAcceptedFiles()[i]);
                }; // Tell Dropzone to process all queued files.

              }
            });
          }
        };

        
      }
    </script>
    <style>
    .input-field{
      width: 50%;
    }
    .dosen-name{
      margin-left: 24px;
    }
    </style>
  </body>
</html>
